<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>The Secret Life of C++: Day 3: Virtual Inheritance Revisitted</title>
  </head>

  <body>
    <h1>The Secret Life of C++: Day 3: Virtual Inheritance Revisitted</h1>

    Last time we met, we didn't make it all the way through a
    discussion of virtual inheritance. Lets come back to that.

    <h2>Dreaded Diamond Problem</h2>

    This is when we have a base class, a pair of derived classes, and
    we want a class that inherits from both derrived classes.

    <h2>Virtual Base Classes in Memory</h2>

    Classes with a virtual base will have an entry in their VTable
    indicating the offset at which that class can be found. Virtual
    functions accessing the virtual base class will use this offset.
    <p>
    There will also be trampoline functions for any virtual function
    that is not overridden, which sets the this* appropriately using
    that offset.
    <p>
    An example of a simple virtual base class:
    <a href="virtual-sub.cc">virtual-sub.cc</a>,
    <a href="virtual-sub.s">virtual-sub.s</a>,
    <a href="virtual-sub.listing">virtual-sub.listing</a>.
    <p>
    An example of the diamond problem:
    <a href="virtual-diamond.cc">virtual-diamond.cc</a>,
    <a href="virtual-diamond.s">virtual-diamond.s</a>,
    <a href="virtual-diamond.listing">virtual-diamond.listing</a>.
    
    <h2>Virtual Base Classes in the VTable</h2>

    There are two things we will find the VTable: Entries for the
    offsets, and


    <h2>How they are constructed</h2>

    When constructing a class with Virtual base classes, we need to
    populate all the various VTable entries.

    <hr>
    <address><a href="mailto:tibbetts@innocuous.mit.edu">Richard Tibbetts</a></address>
<!-- Created: Tue Jan 20 16:00:02 EST 2004 -->
<!-- hhmts start -->
Last modified: Wed Jan 21 17:36:31 EST 2004
<!-- hhmts end -->
  </body>
</html>
